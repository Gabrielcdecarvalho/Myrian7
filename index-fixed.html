<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal da Myrian - Documentos da Creche</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bibliotecas para funcionalidades -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://unpkg.com/docx@8.2.2/build/index.js"></script>
    
    <style>
        /* Estilos melhorados para corre√ß√µes */
        .ai-buttons-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            text-align: center;
        }
        
        .ai-buttons-section h3 {
            color: white;
            margin-bottom: 16px;
            font-size: 1.2rem;
        }
        
        .ai-buttons-container {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn-ai-improved {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }
        
        .btn-ai-improved:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }
        
        .btn-ai-google {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        
        .btn-ai-google:hover {
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }
        
        /* Tutorial integrado */
        .tutorial-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .tutorial-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        
        .tutorial-step {
            background: rgba(255, 255, 255, 0.1);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }
        
        .tutorial-step-number {
            background: #4c51bf;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-weight: bold;
        }
        
        /* Melhorias nos formul√°rios */
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: #a0aec0;
            font-style: italic;
        }
        
        /* Indicador de grava√ß√£o melhorado */
        .recording-status {
            display: none;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding: 12px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .recording-status.active {
            display: flex;
        }
        
        .recording-dot {
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }
        
        /* √Årea de resultado melhorada */
        .result-actions-improved {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        .btn-download {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .btn-download:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .ai-buttons-container {
                flex-direction: column;
            }
            
            .tutorial-steps {
                grid-template-columns: 1fr;
            }
            
            .result-actions-improved {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">Portal da Myrian</h1>
                <p class="subtitle">Criador de Documentos da Creche</p>
                <div class="badge">üëë Especialmente para Coordenadora Myrian</div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Home Section (reorganizada conforme feedback) -->
            <section id="home" class="section active">
                
                <!-- 1¬∫: Como usar (conforme solicitado) -->
                <div class="tutorial-section">
                    <h2>üì± Como usar (Passo a Passo)</h2>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">1</div>
                            <h4>Escolha o Documento</h4>
                            <p>Clique no tipo que precisa criar</p>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">2</div>
                            <h4>Preencha os Dados</h4>
                            <p>Complete as informa√ß√µes b√°sicas</p>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">3</div>
                            <h4>Escreva ou Grave</h4>
                            <p>Digite ou grave suas observa√ß√µes</p>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">4</div>
                            <h4>Gere o Documento</h4>
                            <p>Clique "Criar" e receba texto profissional</p>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">5</div>
                            <h4>Baixe ou Compartilhe</h4>
                            <p>Word, PDF, WhatsApp ou Email</p>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">6</div>
                            <h4>Aprimore com IA</h4>
                            <p>Use ChatGPT ou Google AI (opcional)</p>
                        </div>
                    </div>
                </div>

                <!-- 2¬∫: Tipos de documento (conforme solicitado) -->
                <div class="document-types">
                    <div class="document-card" onclick="showForm('pad')">
                        <div class="card-icon">üìã</div>
                        <h3>PAD</h3>
                        <p>Plano de Atendimento Diferenciado</p>
                        <div class="card-badge">Inclus√£o</div>
                    </div>

                    <div class="document-card" onclick="showForm('relatorio')">
                        <div class="card-icon">üìä</div>
                        <h3>Relat√≥rio Individual</h3>
                        <p>Desenvolvimento da crian√ßa</p>
                        <div class="card-badge">Para Pais</div>
                    </div>

                    <div class="document-card" onclick="showForm('ata')">
                        <div class="card-icon">üìù</div>
                        <h3>Ata de Reuni√£o</h3>
                        <p>Registro oficial de reuni√µes</p>
                        <div class="card-badge">Formal</div>
                    </div>
                </div>

                <!-- 3¬∫: Se√ß√£o de IA melhorada (conforme feedback) -->
                <div class="ai-buttons-section">
                    <h3>ü§ñ Aprimore com Intelig√™ncia Artificial</h3>
                    <p style="color: rgba(255,255,255,0.9); margin-bottom: 20px;">
                        Depois de criar seu documento, use estas ferramentas para deix√°-lo ainda mais profissional:
                    </p>
                    <div class="ai-buttons-container">
                        <a href="https://chat.openai.com" target="_blank" class="btn-ai-improved">
                            <span>ü§ñ</span>
                            <span>Abrir ChatGPT</span>
                        </a>
                        <a href="https://aistudio.google.com" target="_blank" class="btn-ai-improved btn-ai-google">
                            <span>üé®</span>
                            <span>Abrir Google AI</span>
                        </a>
                        <button class="btn-ai-improved" onclick="showAITutorial()" style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);">
                            <span>üìñ</span>
                            <span>Como Usar IA</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- PAD Form (corrigido conforme feedback) -->
            <section id="pad-form" class="section">
                <div class="form-container">
                    <div class="form-header">
                        <h2>üìã Criar PAD (Plano de Atendimento Diferenciado)</h2>
                        <p>Preencha as informa√ß√µes da crian√ßa e suas observa√ß√µes</p>
                    </div>

                    <form class="document-form">
                        <!-- Dados da Crian√ßa -->
                        <div class="form-section">
                            <h3>üë∂ Dados da Crian√ßa</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pad-nome">Nome Completo da Crian√ßa *</label>
                                    <input type="text" id="pad-nome" placeholder="Ex: Jo√£o Silva Santos" required>
                                </div>
                                <div class="form-group">
                                    <label for="pad-idade">Idade *</label>
                                    <input type="text" id="pad-idade" placeholder="Ex: 3 anos e 6 meses" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pad-nascimento">Data de Nascimento</label>
                                    <input type="date" id="pad-nascimento">
                                </div>
                                <div class="form-group">
                                    <label for="pad-responsavel">Respons√°vel Legal</label>
                                    <input type="text" id="pad-responsavel" placeholder="Ex: Maria Silva Santos">
                                </div>
                            </div>
                        </div>

                        <!-- Informa√ß√µes do Documento -->
                        <div class="form-section">
                            <h3>üìÑ Informa√ß√µes do Documento</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pad-data">Data do Documento *</label>
                                    <input type="date" id="pad-data" required>
                                </div>
                                <div class="form-group">
                                    <label for="pad-periodo">Per√≠odo de Observa√ß√£o *</label>
                                    <input type="text" id="pad-periodo" placeholder="Ex: Mar√ßo a Maio de 2025" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="pad-elaborado">Elaborado por *</label>
                                <input type="text" id="pad-elaborado" value="Myrian Fortuna - Coordenadora Pedag√≥gica" required>
                            </div>
                        </div>

                        <!-- Necessidades e Diagn√≥stico -->
                        <div class="form-section">
                            <h3>üéØ Necessidades Identificadas</h3>
                            <div class="form-group">
                                <label for="pad-necessidades">Descreva as necessidades espec√≠ficas da crian√ßa *</label>
                                <textarea id="pad-necessidades" rows="4" placeholder="Ex: Dificuldades de concentra√ß√£o, necessita de estrat√©gias diferenciadas para manter o foco durante atividades dirigidas..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="pad-diagnostico">Diagn√≥stico ou Suspeita (se houver)</label>
                                <input type="text" id="pad-diagnostico" placeholder="Ex: TEA, TDAH, Defici√™ncia Intelectual, etc.">
                            </div>
                        </div>

                        <!-- Estrat√©gias e Objetivos -->
                        <div class="form-section">
                            <h3>üéØ Estrat√©gias e Objetivos</h3>
                            <div class="form-group">
                                <label for="pad-objetivos">Objetivos do Plano *</label>
                                <textarea id="pad-objetivos" rows="3" placeholder="Ex: Desenvolver habilidades de concentra√ß√£o, promover integra√ß√£o social, estimular desenvolvimento cognitivo..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="pad-estrategias">Estrat√©gias Propostas *</label>
                                <textarea id="pad-estrategias" rows="4" placeholder="Ex: Atividades de curta dura√ß√£o, est√≠mulos visuais e t√°teis, momentos estruturados de movimento..." required></textarea>
                            </div>
                        </div>

                        <!-- Observa√ß√µes com √°udio corrigido -->
                        <div class="form-section">
                            <h3>üìù Observa√ß√µes Adicionais</h3>
                            <div class="form-group">
                                <label for="pad-observacoes">Suas Observa√ß√µes Detalhadas (Opcional)</label>
                                <textarea id="pad-observacoes" rows="6" placeholder="Ex: Jo√£o demonstra interesse por atividades l√∫dicas e responde bem a est√≠mulos visuais. Durante as atividades em grupo, apresenta comportamento agitado..."></textarea>
                            </div>
                            
                            <!-- Se√ß√£o de √°udio corrigida -->
                            <div class="audio-section">
                                <h4>üé§ Ou grave suas observa√ß√µes:</h4>
                                <div class="audio-recorder">
                                    <button type="button" id="pad-record-btn" class="btn btn-audio">
                                        <span class="record-icon">üé§</span>
                                        <span class="record-text">Gravar Observa√ß√µes</span>
                                    </button>
                                    
                                    <!-- Status de grava√ß√£o corrigido -->
                                    <div id="pad-recording-status" class="recording-status">
                                        <div class="recording-dot"></div>
                                        <span>Gravando... Clique novamente para parar</span>
                                    </div>
                                </div>
                                
                                <!-- Container para reprodu√ß√£o -->
                                <div id="pad-audio-playback" style="display: none;">
                                    <h5>üéµ √Åudio gravado:</h5>
                                    <audio controls style="width: 100%; margin: 8px 0;"></audio>
                                    <div class="audio-actions">
                                        <button type="button" class="btn btn-secondary" onclick="downloadAudio('pad')">
                                            üì• Baixar √Åudio
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="transcribeAudio('pad')">
                                            üìù Converter para Texto
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bot√µes de a√ß√£o -->
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="showHome()">
                                ‚Üê Voltar
                            </button>
                            <button type="button" class="btn btn-primary" onclick="createDocument('pad')">
                                ‚ú® Criar PAD Profissional
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Relat√≥rio Form (estrutura similar corrigida) -->
            <section id="relatorio-form" class="section">
                <div class="form-container">
                    <div class="form-header">
                        <h2>üìä Criar Relat√≥rio Individual</h2>
                        <p>Relat√≥rio de desenvolvimento para enviar aos pais</p>
                    </div>

                    <form class="document-form">
                        <!-- Dados b√°sicos -->
                        <div class="form-section">
                            <h3>üë∂ Dados da Crian√ßa</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="relatorio-nome">Nome Completo da Crian√ßa *</label>
                                    <input type="text" id="relatorio-nome" placeholder="Ex: Ana Clara Oliveira" required>
                                </div>
                                <div class="form-group">
                                    <label for="relatorio-idade">Idade *</label>
                                    <input type="text" id="relatorio-idade" placeholder="Ex: 4 anos e 2 meses" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="relatorio-turma">Turma</label>
                                    <input type="text" id="relatorio-turma" placeholder="Ex: Maternal II">
                                </div>
                                <div class="form-group">
                                    <label for="relatorio-periodo">Per√≠odo do Relat√≥rio *</label>
                                    <input type="text" id="relatorio-periodo" placeholder="Ex: 1¬∫ Semestre 2025" required>
                                </div>
                            </div>
                        </div>

                        <!-- Desenvolvimento -->
                        <div class="form-section">
                            <h3>üß† Desenvolvimento</h3>
                            <div class="form-group">
                                <label for="relatorio-cognitivo">Desenvolvimento Cognitivo</label>
                                <textarea id="relatorio-cognitivo" rows="3" placeholder="Ex: Demonstra curiosidade e interesse pelas atividades propostas, consegue manter aten√ß√£o por per√≠odos adequados √† idade..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="relatorio-motor">Desenvolvimento Motor</label>
                                <textarea id="relatorio-motor" rows="3" placeholder="Ex: Apresenta coordena√ß√£o motora adequada para a idade, participa ativamente de atividades f√≠sicas..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="relatorio-social">Desenvolvimento Social e Emocional</label>
                                <textarea id="relatorio-social" rows="3" placeholder="Ex: Interage bem com colegas, demonstra empatia, consegue expressar sentimentos de forma adequada..."></textarea>
                            </div>
                        </div>

                        <!-- Observa√ß√µes gerais com √°udio -->
                        <div class="form-section">
                            <h3>üìù Observa√ß√µes Gerais</h3>
                            <div class="form-group">
                                <label for="relatorio-observacoes">Observa√ß√µes Detalhadas *</label>
                                <textarea id="relatorio-observacoes" rows="6" placeholder="Ex: Durante o per√≠odo observado, a crian√ßa demonstrou evolu√ß√£o significativa em todas as √°reas de desenvolvimento..." required></textarea>
                            </div>
                            
                            <!-- √Åudio para relat√≥rio -->
                            <div class="audio-section">
                                <h4>üé§ Ou grave suas observa√ß√µes:</h4>
                                <div class="audio-recorder">
                                    <button type="button" id="relatorio-record-btn" class="btn btn-audio">
                                        <span class="record-icon">üé§</span>
                                        <span class="record-text">Gravar Observa√ß√µes</span>
                                    </button>
                                    <div id="relatorio-recording-status" class="recording-status">
                                        <div class="recording-dot"></div>
                                        <span>Gravando... Clique novamente para parar</span>
                                    </div>
                                </div>
                                <div id="relatorio-audio-playback" style="display: none;">
                                    <h5>üéµ √Åudio gravado:</h5>
                                    <audio controls style="width: 100%; margin: 8px 0;"></audio>
                                    <div class="audio-actions">
                                        <button type="button" class="btn btn-secondary" onclick="downloadAudio('relatorio')">
                                            üì• Baixar √Åudio
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="transcribeAudio('relatorio')">
                                            üìù Converter para Texto
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="showHome()">
                                ‚Üê Voltar
                            </button>
                            <button type="button" class="btn btn-primary" onclick="createDocument('relatorio')">
                                ‚ú® Criar Relat√≥rio Profissional
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Ata Form (estrutura similar corrigida) -->
            <section id="ata-form" class="section">
                <div class="form-container">
                    <div class="form-header">
                        <h2>üìù Criar Ata de Reuni√£o</h2>
                        <p>Registro oficial de reuni√µes pedag√≥gicas</p>
                    </div>

                    <form class="document-form">
                        <!-- Dados da reuni√£o -->
                        <div class="form-section">
                            <h3>üìÖ Dados da Reuni√£o</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="ata-data">Data da Reuni√£o *</label>
                                    <input type="date" id="ata-data" required>
                                </div>
                                <div class="form-group">
                                    <label for="ata-horario">Hor√°rio *</label>
                                    <input type="time" id="ata-horario" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="ata-local">Local da Reuni√£o</label>
                                <input type="text" id="ata-local" placeholder="Ex: Sala da Coordena√ß√£o">
                            </div>
                            <div class="form-group">
                                <label for="ata-tipo">Tipo de Reuni√£o *</label>
                                <select id="ata-tipo" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="pedagogica">Reuni√£o Pedag√≥gica</option>
                                    <option value="pais">Reuni√£o de Pais</option>
                                    <option value="equipe">Reuni√£o de Equipe</option>
                                    <option value="conselho">Conselho de Classe</option>
                                    <option value="outros">Outros</option>
                                </select>
                            </div>
                        </div>

                        <!-- Participantes e pauta -->
                        <div class="form-section">
                            <h3>üë• Participantes e Pauta</h3>
                            <div class="form-group">
                                <label for="ata-participantes">Participantes *</label>
                                <textarea id="ata-participantes" rows="3" placeholder="Ex: Myrian Fortuna (Coordenadora), Maria Silva (Professora), Jo√£o Santos (Professor)..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="ata-pauta">Pauta da Reuni√£o *</label>
                                <textarea id="ata-pauta" rows="4" placeholder="Ex: 1. An√°lise do desenvolvimento das crian√ßas; 2. Planejamento de atividades; 3. Discuss√£o de casos espec√≠ficos..." required></textarea>
                            </div>
                        </div>

                        <!-- Desenvolvimento da reuni√£o com √°udio -->
                        <div class="form-section">
                            <h3>üí¨ Desenvolvimento da Reuni√£o</h3>
                            <div class="form-group">
                                <label for="ata-desenvolvimento">Discuss√µes e Decis√µes *</label>
                                <textarea id="ata-desenvolvimento" rows="6" placeholder="Ex: Foi discutido o desenvolvimento das crian√ßas do Maternal II. Decidiu-se implementar novas estrat√©gias pedag√≥gicas..." required></textarea>
                            </div>
                            
                            <!-- √Åudio para ata -->
                            <div class="audio-section">
                                <h4>üé§ Ou grave o resumo da reuni√£o:</h4>
                                <div class="audio-recorder">
                                    <button type="button" id="ata-record-btn" class="btn btn-audio">
                                        <span class="record-icon">üé§</span>
                                        <span class="record-text">Gravar Resumo</span>
                                    </button>
                                    <div id="ata-recording-status" class="recording-status">
                                        <div class="recording-dot"></div>
                                        <span>Gravando... Clique novamente para parar</span>
                                    </div>
                                </div>
                                <div id="ata-audio-playback" style="display: none;">
                                    <h5>üéµ √Åudio gravado:</h5>
                                    <audio controls style="width: 100%; margin: 8px 0;"></audio>
                                    <div class="audio-actions">
                                        <button type="button" class="btn btn-secondary" onclick="downloadAudio('ata')">
                                            üì• Baixar √Åudio
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="transcribeAudio('ata')">
                                            üìù Converter para Texto
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="showHome()">
                                ‚Üê Voltar
                            </button>
                            <button type="button" class="btn btn-primary" onclick="createDocument('ata')">
                                ‚ú® Criar Ata Profissional
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Result Section (corrigida) -->
            <section id="result" class="section">
                <div class="result-container">
                    <div class="result-header">
                        <h2>‚úÖ Documento Criado com Sucesso!</h2>
                        <p>Seu documento foi gerado. Agora voc√™ pode copiar, baixar, compartilhar ou aprimorar com IA.</p>
                    </div>

                    <div class="result-content">
                        <div class="document-preview">
                            <textarea id="result-text" readonly></textarea>
                        </div>

                        <div class="result-actions-improved">
                            <button type="button" class="btn btn-primary" onclick="copyToClipboard()">
                                üìã Copiar Texto
                            </button>
                            
                            <button type="button" class="btn btn-download" onclick="downloadAsWord()">
                                üìÑ Baixar Word
                            </button>
                            
                            <button type="button" class="btn btn-download" onclick="downloadAsPDF()">
                                üìï Baixar PDF
                            </button>
                            
                            <button type="button" class="btn btn-whatsapp" onclick="shareOnWhatsApp()">
                                üì± Enviar WhatsApp
                            </button>
                            
                            <button type="button" class="btn btn-success" onclick="sendEmail()">
                                üìß Enviar Email
                            </button>
                            
                            <button type="button" class="btn btn-secondary" onclick="showHome()">
                                üìù Criar Novo
                            </button>
                        </div>

                        <!-- Tutorial de IA integrado -->
                        <div class="ai-tutorial-section" style="margin-top: 24px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px;">
                            <h3>ü§ñ Como aprimorar com IA:</h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px;">
                                <div style="text-align: center;">
                                    <h4>ChatGPT</h4>
                                    <p style="font-size: 0.9rem; margin-bottom: 12px;">1. Copie o texto acima<br>2. Abra chat.openai.com<br>3. Cole: "Aprimore este documento pedag√≥gico:"<br>4. Cole seu texto</p>
                                    <a href="https://chat.openai.com" target="_blank" class="btn btn-ai-improved">
                                        ü§ñ Abrir ChatGPT
                                    </a>
                                </div>
                                <div style="text-align: center;">
                                    <h4>Google AI</h4>
                                    <p style="font-size: 0.9rem; margin-bottom: 12px;">1. Copie o texto acima<br>2. Abra aistudio.google.com<br>3. Cole: "Melhore este documento:"<br>4. Cole seu texto</p>
                                    <a href="https://aistudio.google.com" target="_blank" class="btn btn-ai-improved btn-ai-google">
                                        üé® Abrir Google AI
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Modal de Tutorial de IA -->
            <div id="ai-tutorial-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ü§ñ Como Usar IA para Aprimorar Documentos</h2>
                        <button class="modal-close" onclick="closeAITutorial()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div class="tutorial-steps">
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">1</div>
                                <h4>Crie seu documento</h4>
                                <p>Use o portal para gerar o texto base</p>
                            </div>
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">2</div>
                                <h4>Copie o texto</h4>
                                <p>Clique em "Copiar Texto" na tela de resultado</p>
                            </div>
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">3</div>
                                <h4>Abra a IA</h4>
                                <p>ChatGPT ou Google AI (links abaixo)</p>
                            </div>
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">4</div>
                                <h4>Use o prompt m√°gico</h4>
                                <p>"Aprimore este documento pedag√≥gico mantendo todas as informa√ß√µes:"</p>
                            </div>
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">5</div>
                                <h4>Cole seu texto</h4>
                                <p>Adicione o texto do documento ap√≥s o prompt</p>
                            </div>
                            <div class="tutorial-step">
                                <div class="tutorial-step-number">6</div>
                                <h4>Receba resultado</h4>
                                <p>A IA retornar√° vers√£o aprimorada em segundos</p>
                            </div>
                        </div>
                        <div class="ai-buttons-container" style="margin-top: 24px;">
                            <a href="https://chat.openai.com" target="_blank" class="btn-ai-improved">
                                ü§ñ Abrir ChatGPT
                            </a>
                            <a href="https://aistudio.google.com" target="_blank" class="btn-ai-improved btn-ai-google">
                                üé® Abrir Google AI
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">Criando documento profissional...</p>
        </div>
    </div>

    <!-- Scripts corrigidos -->
    <script src="js/app-fixed.js"></script>
    
    <script>
        // Configura√ß√£o inicial
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Portal da Myrian carregado - Vers√£o Corrigida!');
            
            // Configurar data atual
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                if (!input.value) {
                    input.value = today;
                }
            });
            
            // Configurar grava√ß√£o de √°udio
            setupAudioRecording();
        });

        // Fun√ß√£o para mostrar tutorial de IA
        function showAITutorial() {
            document.getElementById('ai-tutorial-modal').style.display = 'flex';
        }

        function closeAITutorial() {
            document.getElementById('ai-tutorial-modal').style.display = 'none';
        }

        // Sistema de grava√ß√£o corrigido
        let audioRecorder = null;
        let audioChunks = [];
        let currentRecordingType = null;

        async function setupAudioRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                console.log('‚úÖ Permiss√£o de √°udio concedida');
                
                // Parar stream imediatamente para n√£o manter microfone ativo
                stream.getTracks().forEach(track => track.stop());
                
                // Configurar bot√µes de grava√ß√£o
                setupRecordingButtons();
                
            } catch (error) {
                console.log('‚ùå Permiss√£o de √°udio negada ou n√£o dispon√≠vel');
            }
        }

        function setupRecordingButtons() {
            const recordButtons = ['pad-record-btn', 'relatorio-record-btn', 'ata-record-btn'];
            
            recordButtons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                const type = buttonId.replace('-record-btn', '');
                
                if (button) {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        toggleRecording(type);
                    });
                }
            });
        }

        async function toggleRecording(type) {
            if (audioRecorder && audioRecorder.state === 'recording') {
                stopRecording(type);
            } else {
                startRecording(type);
            }
        }

        async function startRecording(type) {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                audioRecorder = new MediaRecorder(stream);
                audioChunks = [];
                currentRecordingType = type;

                audioRecorder.ondataavailable = event => {
                    audioChunks.push(event.data);
                };

                audioRecorder.onstop = () => {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    
                    // Mostrar player de √°udio
                    showAudioPlayer(type, audioUrl, audioBlob);
                    
                    // Parar stream
                    stream.getTracks().forEach(track => track.stop());
                };

                audioRecorder.start();
                
                // Atualizar UI
                updateRecordingUI(type, true);
                
            } catch (error) {
                console.error('Erro ao iniciar grava√ß√£o:', error);
                alert('Erro ao acessar microfone. Verifique as permiss√µes.');
            }
        }

        function stopRecording(type) {
            if (audioRecorder && audioRecorder.state === 'recording') {
                audioRecorder.stop();
                updateRecordingUI(type, false);
            }
        }

        function updateRecordingUI(type, isRecording) {
            const button = document.getElementById(`${type}-record-btn`);
            const status = document.getElementById(`${type}-recording-status`);
            
            if (isRecording) {
                button.innerHTML = '<span class="record-icon">‚èπÔ∏è</span><span class="record-text">Parar Grava√ß√£o</span>';
                button.classList.add('recording');
                if (status) status.classList.add('active');
            } else {
                button.innerHTML = '<span class="record-icon">üé§</span><span class="record-text">Gravar Observa√ß√µes</span>';
                button.classList.remove('recording');
                if (status) status.classList.remove('active');
            }
        }

        function showAudioPlayer(type, audioUrl, audioBlob) {
            const container = document.getElementById(`${type}-audio-playback`);
            if (container) {
                const audio = container.querySelector('audio');
                if (audio) {
                    audio.src = audioUrl;
                }
                container.style.display = 'block';
                
                // Armazenar blob para download
                container.audioBlob = audioBlob;
            }
        }

        function downloadAudio(type) {
            const container = document.getElementById(`${type}-audio-playback`);
            if (container && container.audioBlob) {
                const url = URL.createObjectURL(container.audioBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `observacoes_${type}_${new Date().toISOString().split('T')[0]}.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        function transcribeAudio(type) {
            // Implementar transcri√ß√£o usando Web Speech API
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'pt-BR';
                recognition.continuous = true;
                recognition.interimResults = false;
                
                recognition.onresult = function(event) {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    
                    // Inserir texto no campo correspondente
                    const textarea = document.getElementById(`${type}-observacoes`);
                    if (textarea) {
                        textarea.value = transcript;
                    }
                    
                    alert('Texto transcrito e inserido no campo de observa√ß√µes!');
                };
                
                recognition.onerror = function(event) {
                    console.error('Erro na transcri√ß√£o:', event.error);
                    alert('Erro na transcri√ß√£o. Tente novamente.');
                };
                
                // Para transcri√ß√£o de √°udio j√° gravado, seria necess√°rio uma API externa
                alert('Para transcrever √°udio gravado, copie o texto manualmente ou use uma ferramenta externa.');
                
            } else {
                alert('Transcri√ß√£o de √°udio n√£o suportada neste navegador. Use Chrome para melhor compatibilidade.');
            }
        }
    </script>
</body>
</html>

